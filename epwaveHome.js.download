var loading=false,epWave;$(document).ready(function(){showUserButtons(remoteUser);if(!isPositive($("#epwaveId").val())){$(".copyButton").hide()}else{$(".shareButton").show();$("#shareLink").val(document.location);$("#shareLink").click(function(){$(this).select()});if(SHARE_ON_SOCIAL){$("#linkedIn").html('<script type="IN/Share" data-url="'+document.location+'"><\/script>');$("#shareOnTwitter").attr("href","http://twitter.com/home?status=Check out my waves: "+document.location);$("#shareOnFacebook").click(function(){FB.ui({method:"feed",link:""+document.location,picture:"https://www.edaplayground.com/img/Playground-screenshot.png",name:"EPWave - "+document.location},function(){})})}var c=$.trim($("#epwaveUserId").val());if(c!==userId){$(".saveButton").hide()}}updateType();$("#type").change(updateType);var b=$(window).width()-20;epWave=new EPWave(dump,b,$("#waves"));epWave.elementCursorTime=$(".cursorTime");epWave.elementRemoveWave=$(".removeWave");epWave.elementUpWave=$(".upWave");epWave.elementDownWave=$(".downWave");epWave.elementStart=$("#start");epWave.elementEnd=$("#end");epWave.waveIndex=EPWAVE_WAVE_INDEX;epWave.reloadIndex();epWave.setRadix(EPWAVE_RADIX);epWave.createSvg(EPWAVE_START,EPWAVE_END);epWave.setMarkerByTime(EPWAVE_CURSOR_TIME);if(!EPWAVE_DEFAULT){epWave.populateStartEnd()}epWave.checkWarnings();epWave.populateSignalSelects($("#scopeSelect"),$("#nameSelect"),$("#appendSelected"),$("#appendAll"));applyEmbedSettings();$("#loadingCover").hide();$("#saveButton").click({action:contextPath+"/w/save"},_.bind(epWave.save,epWave));$("#copyButton").click({action:contextPath+"/w/copy"},_.bind(epWave.save,epWave));$(".zoomIn").click({epWave:epWave},function(d){d.data.epWave.zoomIn()});$(".zoomOut").click({epWave:epWave},function(d){d.data.epWave.zoomOut()});$(".zoomFull").click({epWave:epWave},function(d){d.data.epWave.zoomFull()});$(".moveLeft").click({epWave:epWave},function(d){d.data.epWave.moveLeft()});$(".moveRight").click({epWave:epWave},function(d){d.data.epWave.moveRight()});$("#epwave-examples").click(function(){$("#exampleModal").modal();sendGA("epwave","epwave_examples")});$("#waves").click({epWave:epWave},function(e){var d=$(this).position();e.data.epWave.click(e.clientX-d.left,e.clientY+$(document).scrollTop()-d.top)});epWave.elementCursorTime.click({epWave:epWave},function(d){d.data.epWave.centerAroundMarker()});var a=_.debounce(function(d){d.data.epWave.refreshSvg($(window).width()-20)},300);$(window).resize({epWave:epWave},a);epWave.elementRemoveWave.click({epWave:epWave},function(d){d.data.epWave.removeSelectedWave()});epWave.elementUpWave.click({epWave:epWave},function(d){d.data.epWave.upSelectedWave()});epWave.elementDownWave.click({epWave:epWave},function(d){d.data.epWave.downSelectedWave()});$(".signalSelect").click(function(){$("#signalSelectModal").modal()});$("#epwave-apps").click(function(){$("#appsModal").modal();sendGA("epwave","epwave_apps")});$("#loadButton").click({epWave:epWave},function(d){d.data.epWave.loadWave();sendGA("epwave","epwave_load")});$("#type_file, #type_url").on("keypress","",{epWave:epWave},function(d){if(d.which===13){d.data.epWave.loadWave();sendGA("epwave","epwave_load")}});$("#fileToUpload").click(function(d){if(!epWave.isUploadAllowed()){d.preventDefault()}});$("#fileToUpload").change(function(){epWave.loadWave()});$("#expandOptions").click(expandOptions);$("#collapseOptions").click(collapseOptions);$("#radixHex").click({epWave:epWave},function(d){if(d.data.epWave.radix!=="hex"){d.data.epWave.setRadix("hex");d.data.epWave.refreshSvg()}});$("#radixBinary").click({epWave:epWave},function(d){if(d.data.epWave.radix!=="binary"){d.data.epWave.setRadix("binary");d.data.epWave.refreshSvg()}})});function applyEmbedSettings(){if(USE_EMBED){$("#header").hide();$("body").css(style="padding-top","0px");$("#topBreak").hide();$("#typeGroup").parent().hide();$("#footer .footerMask").html("<small>Note: To revert to EPWave opening in a new browser window, set that option on your user page.</small>")}}function expandOptions(){$("#expandedForm").show();$("#expandOptions").hide();$("#collapseOptions").show()}function collapseOptions(){$("#expandedForm").hide();$("#collapseOptions").hide();$("#expandOptions").show()}function updateType(){var a=$("#type option:selected").val();if(a==="playground"){$("#type_file").hide();$("#type_url").hide();$("#type_upload").hide();$("#type_playground").show();$("#signalFilterField").hide();document.getElementById("start").disabled=true;document.getElementById("end").disabled=true}else{$("#signalFilterField").show();document.getElementById("start").disabled=false;document.getElementById("end").disabled=false;if(a==="file"){$("#type_url").hide();$("#type_upload").hide();$("#type_playground").hide();$("#type_file").show()}else{if(a==="url"){$("#type_file").hide();$("#type_upload").hide();$("#type_playground").hide();$("#type_url").show()}else{if(a==="upload"){$("#type_file").hide();$("#type_url").hide();$("#type_playground").hide();$("#type_upload").show()}}}}};